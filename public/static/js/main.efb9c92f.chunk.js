(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){e.exports=a(244)},111:function(e,t,a){},244:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(38),o=a.n(c),i=(a(111),a(12)),l=a(13),s=a(15),u=a(14),p=a(16),m=a(248),d=a(249),h=a(18),f=a(245),b=a(20),E=a(50),O=a.n(E),g=a(53),y=a.n(g),j=a(52),v=a.n(j),w=a(51),C=a.n(w),k=a(30),x=a.n(k),N=a(95),T=a.n(N),_=a(17),D=a.n(_),M=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.product,a=t.id,n=t.name,c=t.singer,o=t.price,i=this.props,l=i.classes,s=i.addToCart;return r.a.createElement(O.a,{className:l.card},r.a.createElement(f.a,{to:"/product/".concat(a),className:l.link},r.a.createElement(T.a,null,r.a.createElement(C.a,{className:l.media,image:"http://lorempixel.com/800/800/nature/".concat(a),title:"Contemplative Reptile"}),r.a.createElement(v.a,null,r.a.createElement(D.a,{gutterBottom:!0,variant:"h5",component:"h2"},n),r.a.createElement(D.a,{component:"p"},c)))),r.a.createElement(y.a,null,r.a.createElement(x.a,{size:"small",color:"primary",onClick:function(){return s(e.props.product)}},"Add to card"),r.a.createElement(x.a,{size:"small",color:"primary"},o," $")))}}]),t}(n.Component),S=Object(b.withStyles)({card:{width:240,margin:"10px 20px"},media:{height:140},link:{textDecoration:"none"}})(M),I=a(96),R=a.n(I),A=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={previousCountOfData:0},a.showMore=function(){a.props.loadItems(a.props.page)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){0===this.props.discs.length&&this.props.loadItems(this.props.page)}},{key:"render",value:function(){var e=this,t=this.props,a=t.discs,n=t.classes;return r.a.createElement("div",null,r.a.createElement("div",{className:n.root},a.map(function(t){return r.a.createElement(S,{product:t,key:t.id,addToCart:e.props.addToCart})})),r.a.createElement("div",{className:n.buttonContainer},r.a.createElement(R.a,{variant:"extended","aria-label":"Delete",className:n.fab,onClick:this.showMore,disabled:this.props.canLoadMore},"Show more")))}}]),t}(n.Component);A.defaultProps={discs:[]};var L=Object(b.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,width:"1000px",margin:"30px auto 0"},fab:{margin:e.spacing.unit},buttonContainer:{display:"flex",justifyContent:"center"}}})(A),B="GET_ITEMS",W=a(54),q=a.n(W),z=function(e,t){return{type:B,payload:{items:e,canLoadMore:t}}};var P="ADD_TO_CARD",$=function(e){return{type:P,payload:e}},G=Object(h.b)(function(e){return{discs:e.discs.products,page:e.discs.page,canLoadMore:e.discs.canLoadMore}},function(e){return{loadItems:function(t){return e(function(e){var t;return function(a,n){q.a.get("http://localhost:3010/api/discs?_page=".concat(e,"&_limit=6")).then(function(e){return t=Number(e.headers["x-total-count"])-n().discs.products.length<6,e.data}).then(function(e){return a(z(e,t))})}}(t))},addToCart:function(t){return e($(t))}}})(L),U=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.props.cleanError()}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.layout},r.a.createElement(D.a,{variant:"h3"},"Ooops, something went wrong"),r.a.createElement(f.a,{to:"/"},r.a.createElement(D.a,{variant:"h5"},"Back to the home page")))}}]),t}(n.Component),X=Object(b.withStyles)({layout:{marginTop:"30px",display:"flex",flexDirection:"column",alignItems:"center"}})(U),F="CATCH_ERROR",J="CLEAR_ERROR",H=function(e,t){return e({type:F,payload:t})},V=function(){return{type:J}},K=Object(h.b)(null,function(e){return{cleanError:function(){return e(V())}}})(X),Q=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){0===Object.keys(this.props.disc).length&&this.props.getOneItem(this.props.match.params.id)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.addToCart,c=this.props.disc,o=c.id,i=c.name,l=c.singer,s=c.price,u=c.description;return r.a.createElement("div",{className:a.container},r.a.createElement(O.a,{className:a.card},r.a.createElement("div",null,r.a.createElement(C.a,{className:a.media,image:"http://lorempixel.com/800/800/nature/".concat(o),title:i}),r.a.createElement(v.a,null,r.a.createElement(D.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Album: ",i),r.a.createElement(D.a,{gutterBottom:!0,variant:"h6",component:"h2"},"Singer: ",l),r.a.createElement(D.a,{component:"p"},u))),r.a.createElement(y.a,{className:a.btns},r.a.createElement(x.a,{size:"small",color:"primary",className:a.addToCart,onClick:function(){return n(e.props.disc)}},"Add to card"),r.a.createElement(x.a,{size:"small",color:"primary",className:a.addToCart},s," $"))))}}]),t}(n.Component),Y=Object(b.withStyles)({card:{width:800,height:800,display:"flex",flexDirection:"column",justifyContent:"space-between"},media:{height:400},container:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:"30px"},btns:{display:"flex",width:"100%",justifyContent:"space-between"},addToCart:{fontSize:"20px"}})(Q),Z="GET_ONE_ITEM",ee=function(e){return{type:Z,payload:e}};var te=a(31),ae=a(55),ne=Object(ae.a)(function(e,t){var a=t.match.params.id;return{discs:Object(te.a)(e.products),id:Number(a)}},function(e){return e.discs.find(function(t){return t.id===e.id})}),re=Object(h.b)(function(e,t){return{disc:ne(e.discs,t)||e.details,error:e.error}},function(e){return{getOneItem:function(t){return e(function(e){var t;return function(a){q.a.get("http://localhost:3010/api/discs/".concat(e)).then(function(e){return t=e.status,e.data}).then(function(e){t>=400&&H(a,t),a(ee(e))}).catch(function(e){return a(H(e))})}}(t))},addToCart:function(t){return e($(t))}}})(Y),ce=a(97),oe=a.n(ce),ie=a(99),le=a.n(ie),se=a(33),ue=a.n(se),pe=a(98),me=a.n(pe),de=a(67),he=a.n(de),fe=a(48),be=a.n(fe),Ee=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.cart;return r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{className:t.root},r.a.createElement(oe.a,{className:t.table},r.a.createElement(me.a,null,r.a.createElement(he.a,null,r.a.createElement(ue.a,{align:"center"},"Name"),r.a.createElement(ue.a,{align:"center"},"Amount"),r.a.createElement(ue.a,{align:"center"},"Price"))),r.a.createElement(le.a,null,a.map(function(e){return r.a.createElement(he.a,{key:e.id},r.a.createElement(ue.a,{align:"center"},e.name),r.a.createElement(ue.a,{align:"center"},e.quantity),r.a.createElement(ue.a,{align:"center"},e.price,"$"))})))),r.a.createElement("div",{className:t.priceContainer},a.length>0?r.a.createElement(D.a,{variant:"h5",className:t.header,component:"h"},"Total price: ",this.props.totalPrice," $"):r.a.createElement(D.a,{variant:"h5",className:t.header,component:"h"},"Cart is empty")))}}]),t}(n.Component),Oe=Object(b.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},header:{textAlign:"center"},table:{minWidth:700},priceContainer:{margin:"20px auto"}}})(Ee),ge=Object(ae.a)(function(e){return e.cart},function(e){return e.reduce(function(e,t){return e+t.price*t.quantity},0)}),ye=Object(h.b)(function(e){return{cart:e.cart,totalPrice:ge(e)}})(Oe);function je(){return r.a.createElement(m.a,null,r.a.createElement(d.a,{path:"/",component:G,exact:!0}),r.a.createElement(d.a,{path:"/product/:id",component:re,exact:!0}),r.a.createElement(d.a,{path:"/cart",component:ye}),r.a.createElement(d.a,{path:"/notfound",component:K}),r.a.createElement(d.a,{component:K}))}var ve=a(27),we=a(100),Ce=a(32),ke={products:[],page:1};var xe=Object(ve.c)({discs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case B:return Object(Ce.a)({},e,{products:[].concat(Object(te.a)(e.products),Object(te.a)(n.items)),canLoadMore:n.canLoadMore,page:e.page+1});default:return e}},details:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case Z:return Object(Ce.a)({},n);default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case F:return n;case J:return"";default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case P:var r=e.find(function(e){return e.id===n.id});return r?e.map(function(e){return e.id===r.id?Object(Ce.a)({},e,{quantity:e.quantity+1}):e}):[].concat(Object(te.a)(e),[Object(Ce.a)({},n,{quantity:1})]);default:return e}}}),Ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ve.d,Te=a(101),_e=a.n(Te),De=a(102),Me=a.n(De),Se=a(104),Ie=a.n(Se),Re=a(103),Ae=a.n(Re),Le=a(105),Be=a.n(Le),We=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(_e.a,{position:"static"},r.a.createElement(Me.a,{className:e.header},r.a.createElement(D.a,{variant:"h6",color:"inherit",className:e.grow},r.a.createElement(f.a,{to:"/",className:e.link},"Music Discs Store")),r.a.createElement(f.a,{to:"/cart",className:e.link},r.a.createElement(Ae.a,{"aria-label":"Cart",className:e.link},r.a.createElement(Ie.a,{badgeContent:this.props.amount,color:"secondary"},r.a.createElement(Be.a,null)))))))}}]),t}(n.Component),qe=Object(b.withStyles)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},header:{margin:"0 60px"},link:{textDecoration:"none",color:"#fff"},badge:{top:1,right:-15,border:"1px solid ".concat("light"===e.palette.type?e.palette.grey[200]:e.palette.grey[900])}}})(We),ze=Object(h.b)(function(e){return{amount:e.cart.length}})(qe),Pe=a(246),$e=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.props.cleanError()}},{key:"render",value:function(){return this.props.error?r.a.createElement(Pe.a,{to:"/notfound"}):null}}]),t}(n.Component),Ge=Object(h.b)(function(e){return{error:e.error}},function(e){return{cleanError:function(){return e(V())}}})($e);function Ue(e){return r.a.createElement(n.Fragment,null,r.a.createElement(ze,null),e.children,r.a.createElement(Ge,null))}var Xe,Fe=a(247),Je=Object(ve.e)(xe,Xe,Ne(Object(ve.a)(we.a))),He=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{store:Je},r.a.createElement(Fe.a,null,r.a.createElement(Ue,null,r.a.createElement(je,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(He,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[106,2,1]]]);
//# sourceMappingURL=main.efb9c92f.chunk.js.map